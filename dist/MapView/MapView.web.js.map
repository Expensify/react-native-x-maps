{"version":3,"file":"MapView.web.js","names":["_reactMapGl","_interopRequireWildcard","require","_react","_reactNative","_utils","_interopRequireDefault","_Direction","_CONST","_jsxRuntime","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","isArray","MapView","forwardRef","_ref","ref","accessToken","waypoints","style","mapPadding","directionCoordinates","_ref$initialState","initialState","DEFAULT_INITIAL_STATE","styleURL","directionStyle","_useState","useState","_useState2","mapRef","setMapRef","setRef","useCallback","newRef","useEffect","flyTo","center","coordinate","zoom","map","getMap","_Utils$getBounds","Utils","getBounds","waypoint","northEast","southWest","fitBounds","padding","useImperativeHandle","location","animationDuration","duration","jsx","View","children","jsxs","mapboxAccessToken","initialViewState","longitude","latitude","mapStyle","_ref2","MarkerComponent","markerComponent","Marker","concat","coordinates","_default","exports"],"sources":["../../src/MapView/MapView.web.tsx"],"sourcesContent":["import Map, {MapRef, Marker} from 'react-map-gl';\nimport {forwardRef, useCallback, useEffect, useImperativeHandle, useState} from 'react';\nimport {View} from 'react-native';\nimport {MapViewHandle, MapViewProps} from './MapViewTypes';\nimport Utils from './utils';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport Direction from './Direction';\nimport {DEFAULT_INITIAL_STATE} from './CONST';\n\nconst MapView = forwardRef<MapViewHandle, MapViewProps>(function MapView(\n    {accessToken, waypoints, style, mapPadding, directionCoordinates, initialState = DEFAULT_INITIAL_STATE, styleURL, directionStyle},\n    ref,\n) {\n    const [mapRef, setMapRef] = useState<MapRef | null>(null);\n\n    const setRef = useCallback((newRef: MapRef | null) => setMapRef(newRef), []);\n\n    useEffect(() => {\n        if (!waypoints || waypoints.length === 0) {\n            return;\n        }\n\n        if (!mapRef) {\n            return;\n        }\n\n        if (waypoints.length === 1) {\n            mapRef.flyTo({\n                center: waypoints[0].coordinate,\n                zoom: 15,\n            });\n            return;\n        }\n\n        const map = mapRef.getMap();\n\n        const {northEast, southWest} = Utils.getBounds(waypoints.map((waypoint) => waypoint.coordinate));\n        map.fitBounds([northEast, southWest], {padding: mapPadding});\n    }, [waypoints, mapRef]);\n\n    useImperativeHandle(\n        ref,\n        () => ({\n            flyTo: (location: [number, number], animationDuration?: number) =>\n                mapRef?.flyTo({\n                    center: location,\n                    duration: animationDuration,\n                }),\n        }),\n        [],\n    );\n\n    return (\n        <View style={style}>\n            <Map\n                ref={setRef}\n                mapboxAccessToken={accessToken}\n                initialViewState={{\n                    longitude: initialState?.location[0],\n                    latitude: initialState?.location[1],\n                    zoom: initialState?.zoom,\n                }}\n                mapStyle={styleURL}\n            >\n                {waypoints &&\n                    waypoints.map(({coordinate, markerComponent: MarkerComponent}) => (\n                        <Marker\n                            key={`${coordinate[0]},${coordinate[1]}`}\n                            longitude={coordinate[0]}\n                            latitude={coordinate[1]}\n                        >\n                            <MarkerComponent />\n                        </Marker>\n                    ))}\n                {directionCoordinates && (\n                    <Direction\n                        coordinates={directionCoordinates}\n                        directionStyle={directionStyle}\n                    />\n                )}\n            </Map>\n        </View>\n    );\n});\n\nexport default MapView;\n"],"mappings":"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"}