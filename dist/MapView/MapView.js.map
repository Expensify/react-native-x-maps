{"version":3,"file":"MapView.js","names":["_react","require","_maps","_interopRequireWildcard","_reactNative","_Direction","_interopRequireDefault","_utils","_jsxRuntime","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","MapView","forwardRef","_ref","ref","accessToken","style","styleURL","pitchEnabled","mapPadding","initialState","waypoints","directionCoordinates","directionStyle","cameraRef","useRef","bounds","useMemo","length","undefined","_cameraRef$current","_cameraRef$current2","current","flyTo","coordinate","zoomTo","_Utils$getBounds","Utils","getBounds","map","waypoint","southWest","northEast","ne","sw","paddingTop","paddingRight","paddingBottom","paddingLeft","useImperativeHandle","location","animationDuration","_cameraRef$current3","useEffect","Mapbox","setAccessToken","jsx","View","children","jsxs","flex","Camera","defaultSettings","centerCoordinate","zoomLevel","zoom","_ref2","MarkerComponent","markerComponent","MarkerView","id","concat","coordinates","_default","exports"],"sources":["../../src/MapView/MapView.tsx"],"sourcesContent":["import {forwardRef, useEffect, useImperativeHandle, useMemo, useRef} from 'react';\nimport Mapbox, {MarkerView} from '@rnmapbox/maps';\nimport {View} from 'react-native';\nimport {MapViewProps, MapViewHandle} from './MapViewTypes';\nimport Direction from './Direction';\nimport Utils from './utils';\n\nconst MapView = forwardRef<MapViewHandle, MapViewProps>(function MapView(\n    {accessToken, style, styleURL, pitchEnabled, mapPadding, initialState, waypoints, directionCoordinates, directionStyle},\n    ref,\n) {\n    const cameraRef = useRef<Mapbox.Camera>(null);\n\n    const bounds = useMemo(() => {\n        if (!waypoints || waypoints.length === 0) {\n            return undefined;\n        }\n\n        if (waypoints.length === 1) {\n            cameraRef.current?.flyTo(waypoints[0].coordinate);\n            cameraRef.current?.zoomTo(15);\n            return undefined;\n        }\n\n        const {southWest, northEast} = Utils.getBounds(waypoints.map((waypoint) => waypoint.coordinate));\n        return {\n            ne: northEast,\n            sw: southWest,\n            paddingTop: mapPadding,\n            paddingRight: mapPadding,\n            paddingBottom: mapPadding,\n            paddingLeft: mapPadding,\n        };\n    }, [waypoints]);\n\n    useImperativeHandle(\n        ref,\n        () => ({\n            flyTo: (location: [number, number], animationDuration?: number) => cameraRef.current?.flyTo(location, animationDuration),\n        }),\n        [],\n    );\n\n    // Initialize Mapbox on first mount\n    useEffect(() => {\n        Mapbox.setAccessToken(accessToken);\n    }, []);\n\n    return (\n        <View style={style}>\n            <Mapbox.MapView\n                styleURL={styleURL}\n                pitchEnabled={pitchEnabled}\n                style={{flex: 1}}\n            >\n                <Mapbox.Camera\n                    ref={cameraRef}\n                    defaultSettings={{\n                        centerCoordinate: initialState?.location,\n                        zoomLevel: initialState?.zoom,\n                    }}\n                    bounds={bounds}\n                />\n                {waypoints &&\n                    waypoints.map(({coordinate, markerComponent: MarkerComponent}) => (\n                        <MarkerView\n                            id={`${coordinate[0]},${coordinate[1]}`}\n                            key={`${coordinate[0]},${coordinate[1]}`}\n                            coordinate={coordinate}\n                        >\n                            <MarkerComponent />\n                        </MarkerView>\n                    ))}\n                {directionCoordinates && (\n                    <Direction\n                        coordinates={directionCoordinates}\n                        directionStyle={directionStyle}\n                    />\n                )}\n            </Mapbox.MapView>\n        </View>\n    );\n});\n\nexport default MapView;\n"],"mappings":"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"}