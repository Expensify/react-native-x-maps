{"version":3,"file":"MapView.js","names":["_react","require","_maps","_interopRequireWildcard","_reactNative","_Direction","_interopRequireDefault","_utils","_jsxRuntime","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","MapView","forwardRef","_ref","ref","accessToken","style","styleURL","pitchEnabled","mapPadding","initialState","waypoints","MarkerComponent","markerComponent","directionCoordinates","cameraRef","useRef","bounds","useMemo","length","undefined","_cameraRef$current","_cameraRef$current2","current","flyTo","zoomTo","_Utils$getBounds","Utils","getBounds","southWest","northEast","ne","sw","paddingTop","paddingRight","paddingBottom","paddingLeft","useImperativeHandle","location","animationDuration","_cameraRef$current3","useEffect","Mapbox","setAccessToken","jsx","View","children","jsxs","flex","Camera","defaultSettings","centerCoordinate","zoomLevel","zoom","map","waypoint","MarkerView","id","concat","coordinate","coordinates","_default","exports"],"sources":["../../src/MapView/MapView.tsx"],"sourcesContent":["import {forwardRef, useEffect, useImperativeHandle, useMemo, useRef} from 'react';\nimport Mapbox, {MarkerView} from '@rnmapbox/maps';\nimport {View} from 'react-native';\nimport {MapViewProps, MapViewHandle} from './MapViewTypes';\nimport Direction from './Direction';\nimport Utils from './utils';\n\nconst MapView = forwardRef<MapViewHandle, MapViewProps>(function MapView(\n    {accessToken, style, styleURL, pitchEnabled, mapPadding, initialState, waypoints, markerComponent: MarkerComponent, directionCoordinates},\n    ref,\n) {\n    const cameraRef = useRef<Mapbox.Camera>(null);\n\n    const bounds = useMemo(() => {\n        if (!waypoints || waypoints.length === 0) {\n            return undefined;\n        }\n\n        if (waypoints.length === 1) {\n            cameraRef.current?.flyTo(waypoints[0]);\n            cameraRef.current?.zoomTo(15);\n            return undefined;\n        }\n\n        const {southWest, northEast} = Utils.getBounds(waypoints);\n        return {\n            ne: northEast,\n            sw: southWest,\n            paddingTop: mapPadding,\n            paddingRight: mapPadding,\n            paddingBottom: mapPadding,\n            paddingLeft: mapPadding,\n        };\n    }, [waypoints]);\n\n    useImperativeHandle(\n        ref,\n        () => ({\n            flyTo: (location: [number, number], animationDuration?: number) => cameraRef.current?.flyTo(location, animationDuration),\n        }),\n        [],\n    );\n\n    // Initialize Mapbox on first mount\n    useEffect(() => {\n        Mapbox.setAccessToken(accessToken);\n    }, []);\n\n    return (\n        <View style={style}>\n            <Mapbox.MapView\n                styleURL={styleURL}\n                pitchEnabled={pitchEnabled}\n                style={{flex: 1}}\n            >\n                <Mapbox.Camera\n                    ref={cameraRef}\n                    defaultSettings={{\n                        centerCoordinate: initialState?.location,\n                        zoomLevel: initialState?.zoom,\n                    }}\n                    bounds={bounds}\n                />\n                {MarkerComponent &&\n                    waypoints &&\n                    waypoints.map((waypoint) => (\n                        <MarkerView\n                            id={`${waypoint[0]},${waypoint[1]}`}\n                            key={`${waypoint[0]},${waypoint[1]}`}\n                            coordinate={waypoint}\n                        >\n                            <MarkerComponent />\n                        </MarkerView>\n                    ))}\n                {directionCoordinates && <Direction coordinates={directionCoordinates} />}\n            </Mapbox.MapView>\n        </View>\n    );\n});\n\nexport default MapView;\n"],"mappings":"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"}